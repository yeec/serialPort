<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="bros.manage.business.mapper.TelSysStatusMapper" >

	<resultMap id='telSysStatusMap' type='java.util.HashMap' >
	    <result property='TEL_ID' column='TEL_ID' />
		<result property='SYS_NAME' column='SYS_NAME' /> 
		<result property='SYS_IP' column='SYS_IP' />  
		<result property='SYS_STATUS' column='SYS_STATUS' />
		<result property='SYS_DATABASE' column='SYS_DATABASE' />
		<result property='LAST_TIME' column='LAST_TIME' />
    </resultMap>

    <sql id='telSysStatusQueue' >
		TEL_ID,  
		SYS_NAME,    
		SYS_IP,    
		SYS_STATUS,   
		SYS_DATABASE, 
		LAST_TIME   
    </sql>
	
	<!-- 查询当前系统的状态表 -->
    <select id='getTelSysStatus' resultType='int'  >
    	<![CDATA[
	       SELECT
	        count(1)
	        FROM  
			ATMTEL.TEL_SYS_STATUS
		]]>
    </select>
    
    <!-- 更新当前系统的状态列表 -->
    <update id='updateTelSysStatus'  parameterType='java.util.HashMap'>
		UPDATE ATMTEL.TEL_SYS_STATUS
		SET 
		 SYS_IP = #{sysIp},
		 SYS_DATABASE=#{sysDatabase},
		 LAST_TIME=sysdate,
		 SYS_STATUS=#{sysStatus}
		
		
	</update>
	
    <!-- 记录当前系统的状态表-->
	<insert id="insertTelSysStatus" parameterType="java.util.HashMap">
		 insert into ATMTEL.TEL_SYS_STATUS(
		    TEL_ID,  
		    SYS_NAME,    
		    SYS_IP,    
		    SYS_STATUS,   
		    SYS_DATABASE, 
		    LAST_TIME    
		 ) values (
			#{telId},  
		    '电报收发系统',    
		    #{sysIp},    
		    #{sysStatus},   
		    #{sysDatabase}, 
		    sysdate
		)		
	</insert>
</mapper>